{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"profile-wrap\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"nav-tabs\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"address-section\"\n};\nconst _hoisted_6 = {\n  class: \"default-tip\"\n};\nconst _hoisted_7 = {\n  class: \"address-list\"\n};\nconst _hoisted_8 = {\n  class: \"info\"\n};\nconst _hoisted_9 = {\n  class: \"tag\"\n};\nconst _hoisted_10 = {\n  class: \"actions\"\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  key: 1,\n  class: \"placeholder\"\n};\nconst _hoisted_14 = {\n  key: 2,\n  class: \"placeholder\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 顶部栏 \"), _createElementVNode(\"header\", _hoisted_2, [_createElementVNode(\"span\", {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.back()),\n    class: \"back\"\n  }, \"← 返回首页\"), _cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"个人中心\", -1 /* CACHED */))]), _createCommentVNode(\" 新增：导航栏 \"), _createElementVNode(\"nav\", _hoisted_3, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.tabs, tab => {\n    return _createElementVNode(\"span\", {\n      key: tab.key,\n      class: _normalizeClass(['tab', {\n        active: $setup.activeTab === tab.key\n      }]),\n      onClick: $event => $setup.activeTab = tab.key\n    }, _toDisplayString(tab.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_4);\n  }), 64 /* STABLE_FRAGMENT */))]), _createCommentVNode(\" 收货地址（原来整块内容） \"), $setup.activeTab === 'address' ? (_openBlock(), _createElementBlock(\"section\", _hoisted_5, [_createCommentVNode(\" 当前默认地址提示 \"), _createElementVNode(\"section\", _hoisted_6, \" 当前默认地址：\" + _toDisplayString($setup.defaultAddress?.name || '暂无'), 1 /* TEXT */), _createCommentVNode(\" 地址列表 \"), _createElementVNode(\"ul\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.addressList, addr => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: addr.id,\n      class: \"address-card\"\n    }, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, _toDisplayString(addr.receiver), 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString(addr.phone), 1 /* TEXT */)]), _createElementVNode(\"p\", null, _toDisplayString(addr.detail), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_9, _toDisplayString(addr.name), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n      class: \"default-btn\",\n      onClick: $event => $setup.setDefault(addr.id)\n    }, _toDisplayString(addr.isDefault ? '已默认' : '设为默认'), 9 /* TEXT, PROPS */, _hoisted_11), _createElementVNode(\"button\", {\n      class: \"del-btn\",\n      onClick: $event => $setup.delAddress(addr.id)\n    }, \"删除\", 8 /* PROPS */, _hoisted_12)])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" 新建 / 编辑弹窗 \"), $setup.showModal ? (_openBlock(), _createBlock($setup[\"AddressModal\"], {\n    key: 0,\n    editing: $setup.editingAddress,\n    onClose: _cache[1] || (_cache[1] = $event => $setup.showModal = false),\n    onSave: $setup.saveAddress\n  }, null, 8 /* PROPS */, [\"editing\"])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 底部按钮 \"), _createElementVNode(\"footer\", {\n    class: \"add-footer\"\n  }, [_createElementVNode(\"button\", {\n    class: \"add-btn\",\n    onClick: $setup.openAdd\n  }, \"新建地址\")])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 预留：个人信息、隐私内容占位 \"), $setup.activeTab === 'profile' ? (_openBlock(), _createElementBlock(\"section\", _hoisted_13, _cache[3] || (_cache[3] = [_createElementVNode(\"p\", null, \"个人信息模块待开发\", -1 /* CACHED */)]))) : _createCommentVNode(\"v-if\", true), $setup.activeTab === 'privacy' ? (_openBlock(), _createElementBlock(\"section\", _hoisted_14, _cache[4] || (_cache[4] = [_createElementVNode(\"p\", null, \"隐私内容模块待开发\", -1 /* CACHED */)]))) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","onClick","_cache","$event","_ctx","$router","back","_hoisted_3","_Fragment","_renderList","$setup","tabs","tab","key","_normalizeClass","active","activeTab","label","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","defaultAddress","name","_hoisted_7","addressList","addr","id","_hoisted_8","receiver","phone","detail","_hoisted_9","_hoisted_10","setDefault","isDefault","_hoisted_11","delAddress","_hoisted_12","showModal","_createBlock","editing","editingAddress","onClose","onSave","saveAddress","openAdd","_hoisted_13","_hoisted_14"],"sources":["D:\\Desktop\\ecomplat\\src\\views\\UserProfile.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-wrap\">\r\n    <!-- 顶部栏 -->\r\n    <header class=\"header\">\r\n      <span @click=\"$router.back()\" class=\"back\">← 返回首页</span>\r\n      <h2>个人中心</h2>\r\n    </header>\r\n\r\n    <!-- 新增：导航栏 -->\r\n    <nav class=\"nav-tabs\">\r\n      <span\r\n        v-for=\"tab in tabs\"\r\n        :key=\"tab.key\"\r\n        :class=\"['tab', { active: activeTab === tab.key }]\"\r\n        @click=\"activeTab = tab.key\"\r\n      >\r\n        {{ tab.label }}\r\n      </span>\r\n    </nav>\r\n\r\n    <!-- 收货地址（原来整块内容） -->\r\n    <section v-if=\"activeTab === 'address'\" class=\"address-section\">\r\n      <!-- 当前默认地址提示 -->\r\n      <section class=\"default-tip\">\r\n        当前默认地址：{{ defaultAddress?.name || '暂无' }}\r\n      </section>\r\n\r\n      <!-- 地址列表 -->\r\n      <ul class=\"address-list\">\r\n        <li v-for=\"addr in addressList\" :key=\"addr.id\" class=\"address-card\">\r\n          <div class=\"info\">\r\n            <p><strong>{{ addr.receiver }}</strong> {{ addr.phone }}</p>\r\n            <p>{{ addr.detail }}</p>\r\n            <p class=\"tag\">{{ addr.name }}</p>\r\n          </div>\r\n          <div class=\"actions\">\r\n            <button class=\"default-btn\" @click=\"setDefault(addr.id)\">\r\n              {{ addr.isDefault ? '已默认' : '设为默认' }}\r\n            </button>\r\n            <button class=\"del-btn\" @click=\"delAddress(addr.id)\">删除</button>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n\r\n      <!-- 新建 / 编辑弹窗 -->\r\n      <AddressModal\r\n        v-if=\"showModal\"\r\n        :editing=\"editingAddress\"\r\n        @close=\"showModal=false\"\r\n        @save=\"saveAddress\"\r\n      />\r\n\r\n      <!-- 底部按钮 -->\r\n      <footer class=\"add-footer\">\r\n        <button class=\"add-btn\" @click=\"openAdd\">新建地址</button>\r\n      </footer>\r\n    </section>\r\n\r\n    <!-- 预留：个人信息、隐私内容占位 -->\r\n    <section v-if=\"activeTab === 'profile'\" class=\"placeholder\">\r\n      <p>个人信息模块待开发</p>\r\n    </section>\r\n    <section v-if=\"activeTab === 'privacy'\" class=\"placeholder\">\r\n      <p>隐私内容模块待开发</p>\r\n    </section>\r\n  </div>\r\n</template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted } from 'vue'\r\n  import AddressModal from '@/components/AddressModal.vue'\r\n  import { ElMessage } from 'element-plus'\r\n  defineOptions({ name: 'UserProfile' })\r\n  import {\r\n  getAddress,\r\n  saveAddress as apiSave,\r\n  delAddress as apiDel,\r\n  setDefault as apiSet\r\n} from '@/api/address'\r\n\r\n  // 从localStorage获取用户ID（假设登录时已存储）\r\n  const userId = localStorage.getItem('uid') || ''\r\n\r\n  // 地址列表\r\n  const tabs = [\r\n  { key: 'profile', label: '个人信息' },\r\n  { key: 'address', label: '收货地址' },\r\n  { key: 'privacy', label: '隐私内容' }\r\n]\r\n  const activeTab = ref('address')   // 默认显示收货地址\r\n  const addressList = ref([])\r\n  const defaultAddress = ref(null)\r\n  const showModal = ref(false)\r\n  const editingAddress = ref(null)\r\n  \r\n  // 拉取地址\r\n  async function loadAddress () {\r\n  try {\r\n    const list = await getAddress()\r\n    addressList.value = list\r\n    defaultAddress.value = list.find(i => i.isDefault) || null\r\n  } catch {\r\n    ElMessage.error('加载地址失败')\r\n  }\r\n}\r\n  \r\n  // 设为默认\r\n  async function setDefault (id) {\r\n  try {\r\n    await apiSet(id)\r\n    ElMessage.success('已设为默认')\r\n    loadAddress()\r\n  } catch {\r\n    ElMessage.error('设置失败')\r\n  }\r\n}\r\n  \r\n  // 删除\r\n  async function delAddress (id) {\r\n  try {\r\n    await apiDel(id)\r\n    ElMessage.success('已删除')\r\n    loadAddress()\r\n  } catch {\r\n    ElMessage.error('删除失败')\r\n  }\r\n}\r\n  \r\n  // 打开新建\r\n  function openAdd () {\r\n    editingAddress.value = { userId }\r\n    showModal.value = true\r\n  }\r\n  \r\n  // 保存（新增或更新）\r\n  async function saveAddress (form) {\r\n  try {\r\n    await apiSave(form)\r\n    ElMessage.success('保存成功')\r\n    showModal.value = false\r\n    loadAddress()\r\n  } catch {\r\n    ElMessage.error('保存失败')\r\n  }\r\n}\r\n  \r\n  onMounted(loadAddress)\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .nav-tabs {\r\n  display: flex;\r\n  background: #fff;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.tab {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 12px 0;\r\n  font-size: 15px;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n.tab.active {\r\n  color: #1890ff;\r\n  font-weight: bold;\r\n  border-bottom: 2px solid #1890ff;\r\n}\r\n.placeholder {\r\n  text-align: center;\r\n  padding: 50px 0;\r\n  color: #999;\r\n}\r\n  .profile-wrap { min-height: 100vh; background: #f6f6f6; }\r\n  .header {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 12px;\r\n    background: #fff;\r\n    border-bottom: 1px solid #eee;\r\n  }\r\n  .back { margin-right: 12px; font-size: 16px; color: #1890ff; cursor: pointer; }\r\n  .default-tip { padding: 10px 15px; font-size: 14px; color: #666; }\r\n  .address-list { padding: 0 15px 70px; }\r\n  .address-card {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    background: #fff;\r\n    margin-bottom: 10px;\r\n    padding: 12px;\r\n    border-radius: 6px;\r\n  }\r\n  .address-card .info p { margin: 4px 0; font-size: 14px; }\r\n  .actions button {\r\n    margin-left: 8px;\r\n    padding: 4px 8px;\r\n    border: none;\r\n    border-radius: 4px;\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n  }\r\n  .default-btn { background: #1890ff; color: #fff; }\r\n  .del-btn { background: #ff4d4f; color: #fff; }\r\n  .add-footer {\r\n    position: fixed;\r\n    bottom: 0;\r\n    width: 100%;\r\n    padding: 10px;\r\n    background: #fff;\r\n  }\r\n  .add-btn {\r\n    width: 100%;\r\n    padding: 12px;\r\n    border: none;\r\n    border-radius: 4px;\r\n    background: #ff5000;\r\n    color: #fff;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n  }\r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}