{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, vModelText as _vModelText } from \"vue\";\nconst _hoisted_1 = {\n  class: \"cart-page\"\n};\nconst _hoisted_2 = {\n  class: \"back-home\"\n};\nconst _hoisted_3 = {\n  class: \"cart-container\"\n};\nconst _hoisted_4 = {\n  class: \"delivery-info\"\n};\nconst _hoisted_5 = {\n  class: \"cart-table\"\n};\nconst _hoisted_6 = [\"onUpdate:modelValue\"];\nconst _hoisted_7 = {\n  class: \"product-info\"\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  class: \"product-desc\"\n};\nconst _hoisted_10 = {\n  class: \"quantity-control\"\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"onUpdate:modelValue\", \"onChange\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n  class: \"cart-actions\"\n};\nconst _hoisted_15 = {\n  class: \"select-all\"\n};\nconst _hoisted_16 = {\n  class: \"total-price\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 返回首页按钮 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.goBackHome && $options.goBackHome(...args))\n  }, \"返回首页\")]), _createCommentVNode(\" 购物车主体内容 \"), _createElementVNode(\"div\", _hoisted_3, [_cache[9] || (_cache[9] = _createElementVNode(\"h2\", {\n    class: \"cart-title\"\n  }, \"我的购物车\", -1 /* CACHED */)), _createCommentVNode(\" 配送地址展示 \"), _createElementVNode(\"div\", _hoisted_4, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", null, \"配送地址：\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString($data.deliveryAddress), 1 /* TEXT */)]), _createCommentVNode(\" 购物车商品列表 \"), _createElementVNode(\"table\", _hoisted_5, [_cache[7] || (_cache[7] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"选择\"), _createElementVNode(\"th\", null, \"商品信息\"), _createElementVNode(\"th\", null, \"单价\"), _createElementVNode(\"th\", null, \"数量\"), _createElementVNode(\"th\", null, \"状态\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.cartItems, (item, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: item.id\n    }, [_createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"checkbox\",\n      \"onUpdate:modelValue\": $event => item.checked = $event,\n      onChange: _cache[1] || (_cache[1] = (...args) => $options.handleCheckAll && $options.handleCheckAll(...args))\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_6), [[_vModelCheckbox, item.checked]])]), _createElementVNode(\"td\", _hoisted_7, [_createElementVNode(\"img\", {\n      src: item.firstImage,\n      alt: \"商品图\",\n      class: \"product-img\"\n    }, null, 8 /* PROPS */, _hoisted_8), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"p\", null, _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(item.desc), 1 /* TEXT */)])]), _createElementVNode(\"td\", null, _toDisplayString(item.price) + \" ¥\", 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, [_createElementVNode(\"button\", {\n      onClick: $event => $options.decreaseQty(index)\n    }, \"-\", 8 /* PROPS */, _hoisted_11), _withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      \"onUpdate:modelValue\": $event => item.quantity = $event,\n      min: \"1\",\n      onChange: $event => $options.handleQtyChange(index)\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_12), [[_vModelText, item.quantity, void 0, {\n      number: true\n    }]]), _createElementVNode(\"button\", {\n      onClick: $event => $options.increaseQty(index)\n    }, \"+\", 8 /* PROPS */, _hoisted_13)]), _createElementVNode(\"td\", null, _toDisplayString(item.stockStatus), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" 操作栏：全选、删除、总价、结算 \"), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.isAllChecked = $event),\n    onChange: _cache[3] || (_cache[3] = (...args) => $options.checkAll && $options.checkAll(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelCheckbox, $data.isAllChecked]]), _cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"全选\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.deleteSelected && $options.deleteSelected(...args))\n  }, \"删除\")]), _createElementVNode(\"div\", _hoisted_16, \" 总价：\" + _toDisplayString($options.totalPrice) + \" ¥ \", 1 /* TEXT */), _createElementVNode(\"button\", {\n    class: \"checkout-btn\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.handleCheckout && $options.handleCheckout(...args))\n  }, \"结算\")])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","onClick","_cache","args","$options","goBackHome","_hoisted_3","_hoisted_4","_toDisplayString","$data","deliveryAddress","_hoisted_5","_Fragment","_renderList","cartItems","item","index","key","id","type","checked","$event","onChange","handleCheckAll","_hoisted_7","src","firstImage","alt","_hoisted_9","name","desc","price","_hoisted_10","decreaseQty","_hoisted_11","quantity","min","handleQtyChange","number","increaseQty","_hoisted_13","stockStatus","_hoisted_14","_hoisted_15","isAllChecked","checkAll","deleteSelected","_hoisted_16","totalPrice","handleCheckout"],"sources":["D:\\Desktop\\ecomplat\\src\\views\\Cart.vue"],"sourcesContent":["<template>\r\n    <div class=\"cart-page\">\r\n      <!-- 返回首页按钮 -->\r\n      <div class=\"back-home\">\r\n        <button @click=\"goBackHome\">返回首页</button>\r\n      </div>\r\n  \r\n      <!-- 购物车主体内容 -->\r\n      <div class=\"cart-container\">\r\n        <h2 class=\"cart-title\">我的购物车</h2>\r\n        <!-- 配送地址展示 -->\r\n        <div class=\"delivery-info\">\r\n          <label>配送地址：</label>\r\n          <span>{{ deliveryAddress }}</span>\r\n        </div>\r\n  \r\n        <!-- 购物车商品列表 -->\r\n        <table class=\"cart-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>选择</th>\r\n              <th>商品信息</th>\r\n              <th>单价</th>\r\n              <th>数量</th>\r\n              <th>状态</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              v-for=\"(item, index) in cartItems\"\r\n              :key=\"item.id\"\r\n            >\r\n              <td>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  v-model=\"item.checked\"\r\n                  @change=\"handleCheckAll\"\r\n                >\r\n              </td>\r\n              <td class=\"product-info\">\r\n                <img :src=\"item.firstImage\" alt=\"商品图\" class=\"product-img\">\r\n                <div class=\"product-desc\">\r\n                  <p>{{ item.name }}</p>\r\n                  <p>{{ item.desc }}</p>\r\n                </div>\r\n              </td>\r\n              <td>{{ item.price }} ¥</td>\r\n              <td class=\"quantity-control\">\r\n                <button @click=\"decreaseQty(index)\">-</button>\r\n                <input\r\n                  type=\"number\"\r\n                  v-model.number=\"item.quantity\"\r\n                  min=\"1\"\r\n                  @change=\"handleQtyChange(index)\"\r\n                >\r\n                <button @click=\"increaseQty(index)\">+</button>\r\n              </td>\r\n              <td>{{ item.stockStatus }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n  \r\n        <!-- 操作栏：全选、删除、总价、结算 -->\r\n        <div class=\"cart-actions\">\r\n          <div class=\"select-all\">\r\n            <input\r\n              type=\"checkbox\"\r\n              v-model=\"isAllChecked\"\r\n              @change=\"checkAll\"\r\n            >\r\n            <label>全选</label>\r\n            <button @click=\"deleteSelected\">删除</button>\r\n          </div>\r\n          <div class=\"total-price\">\r\n            总价：{{ totalPrice }} ¥\r\n          </div>\r\n          <button class=\"checkout-btn\" @click=\"handleCheckout\">结算</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import JSONbig from 'json-bigint'\r\n  export default {\r\n    name: 'CartPage',\r\n    data() {\r\n      return {\r\n        cartItems: [], // 购物车数据\r\n        deliveryAddress: '辽宁省大连市榆林区大连理工大学', // 配送地址\r\n        isAllChecked: false // 全选标识\r\n      }\r\n    },\r\n    computed: {\r\n      // 购物车商品数量（可用于导航栏徽标，若需要可暴露给父组件）\r\n      cartCount() {\r\n        return this.cartItems.reduce((total, item) => total + item.quantity, 0)\r\n      },\r\n      // 计算总价（已选商品）\r\n      totalPrice() {\r\n        return this.cartItems.reduce((total, item) => {\r\n          if (item.checked) {\r\n            return total + item.price * item.quantity\r\n          }\r\n          return total\r\n        }, 0)\r\n      }\r\n    },\r\n    methods: {\r\n      // 返回首页\r\n      goBackHome() {\r\n        this.$router.push('/user') // 跳转到首页路由，根据实际路由调整\r\n      },\r\n      // 减少数量\r\n      decreaseQty(index) {\r\n        if (this.cartItems[index].quantity > 1) {\r\n          this.cartItems[index].quantity--\r\n        }\r\n      },\r\n      // 增加数量\r\n      increaseQty(index) {\r\n        this.cartItems[index].quantity++\r\n      },\r\n      // 数量改变时（可做合法性校验、同步接口等）\r\n      handleQtyChange(index) {\r\n        const qty = this.cartItems[index].quantity\r\n        if (qty < 1) {\r\n          this.cartItems[index].quantity = 1\r\n        }\r\n        // 这里可调用接口同步购物车数量：\r\n        // this.updateCartItemQty(this.cartItems[index].id, qty)\r\n      },\r\n      // 单个商品选中\r\n      handleCheckAll() {\r\n        this.isAllChecked = this.cartItems.every(item => item.checked)\r\n      },\r\n      // 全选/全不选\r\n      checkAll() {\r\n        this.cartItems.forEach(item => {\r\n          item.checked = this.isAllChecked\r\n        })\r\n      },\r\n      // 删除选中商品\r\n      deleteSelected() {\r\n        this.cartItems = this.cartItems.filter(item => !item.checked)\r\n        // 同时调用接口删除购物车数据：\r\n        // const ids = this.cartItems.filter(item => item.checked).map(item => item.id)\r\n        // this.deleteCartItems(ids)\r\n      },\r\n      // 结算（可跳转到结算页，或调用提交订单接口）\r\n      handleCheckout() {\r\n        const selectedItems = this.cartItems.filter(item => item.checked)\r\n        if (selectedItems.length === 0) {\r\n          this.$message.warning('请选择要结算的商品~')\r\n          return\r\n        }\r\n        // 这里可跳转结算页，传递选中商品信息：\r\n        this.$router.push({\r\n          path: '/checkout',\r\n          query: { items: JSON.stringify(selectedItems) }\r\n        })\r\n        // 或直接调用提交订单接口：\r\n        // this.submitOrder(selectedItems)\r\n      },\r\n      // 模拟从接口拉取购物车数据（实际项目替换为真实接口）\r\n      async loadCartItems() {\r\n        try {\r\n          const res = await fetch('http://localhost:8081/api/cart'); \r\n          const text = await res.text(); \r\n          const list = JSONbig.parse(text); \r\n          this.cartItems = list.map(item => ({\r\n            ...item,\r\n            id: String(item.id), \r\n            quantity: 1, \r\n            checked: false, \r\n            firstImage: item.images?.length ? item.images[0] : null, \r\n            stockStatus: '有余货' \r\n          }))\r\n        } catch (e) {\r\n          console.error('拉取购物车失败', e);\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      this.loadCartItems() \r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .cart-page {\r\n    font-family: 'Arial', sans-serif;\r\n    padding: 1rem;\r\n  }\r\n  \r\n  /* 返回首页按钮样式 */\r\n  .back-home {\r\n    margin-bottom: 1rem;\r\n  }\r\n  .back-home button {\r\n    padding: 0.5rem 1rem;\r\n    background-color: #1890ff;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n  }\r\n  .back-home button:hover {\r\n    background-color: #40a9ff;\r\n  }\r\n  \r\n  /* 购物车主体样式 */\r\n  .cart-title {\r\n    font-size: 1.5rem;\r\n    font-weight: bold;\r\n    margin-bottom: 1rem;\r\n  }\r\n  .delivery-info {\r\n    margin-bottom: 1rem;\r\n    font-size: 1rem;\r\n  }\r\n  .cart-table {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n    margin-bottom: 1rem;\r\n  }\r\n  .cart-table th,\r\n  .cart-table td {\r\n    border: 1px solid #ddd;\r\n    padding: 0.8rem;\r\n    text-align: center;\r\n  }\r\n  .product-info {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 1rem;\r\n  }\r\n  .product-img {\r\n    width: 60px;\r\n    height: 60px;\r\n    object-fit: cover;\r\n  }\r\n  .product-desc {\r\n    text-align: left;\r\n  }\r\n  .quantity-control {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 0.5rem;\r\n  }\r\n  .quantity-control input {\r\n    width: 60px;\r\n    text-align: center;\r\n  }\r\n  .cart-actions {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 1rem 0;\r\n  }\r\n  .select-all {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 0.5rem;\r\n  }\r\n  .total-price {\r\n    font-size: 1.2rem;\r\n    font-weight: bold;\r\n  }\r\n  .checkout-btn {\r\n    padding: 0.6rem 1.5rem;\r\n    background-color: #ff4d4f;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 1rem;\r\n  }\r\n  .checkout-btn:hover {\r\n    background-color: #ff7875;\r\n  }\r\n  \r\n  @media (max-width: 768px) {\r\n    .product-info {\r\n      flex-direction: column;\r\n      align-items: flex-start;\r\n    }\r\n    .cart-actions {\r\n      flex-direction: column;\r\n      gap: 1rem;\r\n      align-items: flex-start;\r\n    }\r\n  }\r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}