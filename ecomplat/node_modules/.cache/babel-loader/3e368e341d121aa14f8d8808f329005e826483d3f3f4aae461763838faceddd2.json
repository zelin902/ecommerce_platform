{"ast":null,"code":"import { ref, computed, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nexport default {\n  __name: 'ProductDetail',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const product = ref({});\n    const carCount = ref(0);\n    const reviews = ref([{\n      user: '用户A',\n      comment: '口感醇厚，余味悠长。'\n    }]);\n    const services = ref(['包邮', '名酒鉴真', '品质溯源', '免费上门退换']);\n\n    // 商品主图\n    const firstImage = computed(() => Array.isArray(product.value.images) && product.value.images.length ? product.value.images[0] : '');\n    const count = ref(1);\n    const addCart = () => {\n      // TODO: 替换为你的真实购物车接口\n      console.log(`加入购物车：${product.value.name} × ${count.value}`);\n    };\n    // 拉取商品详情（含 specs）\n    onMounted(async () => {\n      try {\n        const id = String(route.params.id);\n        const res = await fetch(`http://localhost:8081/api/product/${id}`);\n        const text = await res.text();\n        if (!text) throw new Error('空响应');\n        product.value = JSON.parse(text);\n      } catch (e) {\n        console.error('获取商品失败', e);\n      }\n    });\n    const __returned__ = {\n      route,\n      product,\n      carCount,\n      reviews,\n      services,\n      firstImage,\n      count,\n      addCart,\n      ref,\n      computed,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useRoute","route","product","carCount","reviews","user","comment","services","firstImage","Array","isArray","value","images","length","count","addCart","console","log","name","id","String","params","res","fetch","text","Error","JSON","parse","e","error"],"sources":["D:/Desktop/ecomplat/src/views/ProductDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"product-detail\">\r\n      <!-- 顶部返回 -->\r\n      <header class=\"detail-header\">\r\n        <span @click=\"$router.back()\" class=\"back-btn\">← 返回首页</span>\r\n      </header>\r\n  \r\n    <section class=\"price-info\">\r\n    <!-- 左侧小图 -->\r\n        <div class=\"left-thumb\">\r\n            <img :src=\"firstImage\" alt=\"商品主图\" />\r\n        </div>\r\n\r\n        <!-- 右侧信息 -->\r\n        <div class=\"right-info\">\r\n            <h1 class=\"product-title\">{{ product.name }}</h1>\r\n            <p class=\"price\">¥{{ product.price }}</p>\r\n\r\n            <ul class=\"services\">\r\n                <li v-for=\"s in services\" :key=\"s\">{{ s }}</li>\r\n            </ul>\r\n\r\n            <p class=\"stock\">余货量：{{ product.stock }}+</p>\r\n            <el-tag type=\"primary\" size=\"small\">{{ product.category }}</el-tag>\r\n              <!-- 新增：数量选择器 + 加入购物车 -->\r\n            <div class=\"cart-bar\">\r\n                <div class=\"counter\">\r\n                <button @click=\"count > 1 ? count-- : 1\">-</button>\r\n                <span>{{ count }}</span>\r\n                <button @click=\"count++\">+</button>\r\n                </div>\r\n                <button class=\"add-cart-btn\" @click=\"addCart\">加入购物车</button>\r\n            </div>\r\n\r\n        </div>\r\n    </section>\r\n  \r\n      <!-- 商品描述 -->\r\n      <section class=\"description\">\r\n        <h2>商品描述</h2>\r\n        <p>{{ product.description }}</p>\r\n      </section>\r\n  \r\n      <!-- 动态规格 -->\r\n      <section class=\"specs\">\r\n        <h2>商品详情</h2>\r\n        <table>\r\n          <tbody>\r\n            <tr v-for=\"(value, key) in product.specs\" :key=\"key\">\r\n              <td>{{ key }}</td>\r\n              <td>{{ value }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </section>\r\n  \r\n      <!-- 客户评价（示例） -->\r\n      <section class=\"reviews\">\r\n        <h2>客户评价</h2>\r\n        <div class=\"review-card\" v-for=\"r in reviews\" :key=\"r.user\">\r\n          <strong>{{ r.user }}</strong>\r\n          <p>{{ r.comment }}</p>\r\n        </div>\r\n      </section>\r\n  \r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, computed, onMounted } from 'vue'\r\n  import { useRoute } from 'vue-router'\r\n  \r\n  const route = useRoute()\r\n  const product = ref({})\r\n  const carCount = ref(0);\r\n  const reviews = ref([\r\n    { user: '用户A', comment: '口感醇厚，余味悠长。' }\r\n  ])\r\n  const services = ref(['包邮', '名酒鉴真', '品质溯源', '免费上门退换'])\r\n  \r\n  // 商品主图\r\n  const firstImage = computed(() =>\r\n    Array.isArray(product.value.images) && product.value.images.length\r\n      ? product.value.images[0]\r\n      : ''\r\n  )\r\n  const count = ref(1)\r\n\r\n    const addCart = () => {\r\n    // TODO: 替换为你的真实购物车接口\r\n    console.log(`加入购物车：${product.value.name} × ${count.value}`)\r\n    }\r\n  // 拉取商品详情（含 specs）\r\n  onMounted(async () => {\r\n    try {\r\n        const id = String(route.params.id)\r\n      const res = await fetch(`http://localhost:8081/api/product/${id}`)\r\n      const text = await res.text()\r\n      if (!text) throw new Error('空响应')\r\n      product.value = JSON.parse(text)\r\n    } catch (e) {\r\n      console.error('获取商品失败', e)\r\n    }\r\n  })\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .detail-header { padding: 12px; background: #fff; }\r\n  .back-btn { cursor: pointer; font-size: 16px; color: #1890ff; }\r\n  .price-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  padding: 12px;\r\n  background: #fff;\r\n}\r\n.left-thumb img {\r\n  width: 500px;\r\n  height: 500px;\r\n  object-fit: cover;\r\n  border-radius: 4px;\r\n  max-width: 100%;   /* 小屏时自适应 */\r\n}\r\n.right-info {\r\n  flex: 1;\r\n}\r\n  .price { font-size: 24px; color: #f56c6c; margin: 8px 0; }\r\n/* 服务标签水平排布 */\r\n.services {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 6px;\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 8px 0;\r\n}\r\n.services li {\r\n  background: #f1f1f1;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n}\r\n\r\n/* 其余内容保持居中 */\r\n.description,\r\n.specs,\r\n.reviews {\r\n\r\n  /* ✅ 保留原来的 padding、背景、间距即可 */\r\n  padding: 12px;\r\n  margin-top: 12px;\r\n  background: #fff;\r\n}\r\n  .specs table { width: 100%; border-collapse: collapse; }\r\n  .specs td { padding: 6px 0; border-bottom: 1px solid #eee; }\r\n  .detail-footer { position: fixed; bottom: 0; width: 100%; background: #fff; padding: 12px; box-shadow: 0 -2px 6px rgba(0,0,0,.1); }\r\n  .cart-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin: 12px 0;\r\n}\r\n\r\n.counter {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-size: 14px;\r\n}\r\n.counter button {\r\n  width: 24px;\r\n  height: 24px;\r\n  border: 1px solid #dcdcdc;\r\n  background: #fff;\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n}\r\n.counter span {\r\n  min-width: 24px;\r\n  text-align: center;\r\n}\r\n\r\n.add-cart-btn {\r\n  background: #ff5000;\r\n  color: #fff;\r\n  border: none;\r\n  padding: 6px 12px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n  </style>"],"mappings":"AAqEE,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAK;AAC9C,SAASC,QAAQ,QAAQ,YAAY;;;;;;;IAErC,MAAMC,KAAK,GAAGD,QAAQ,CAAC,CAAC;IACxB,MAAME,OAAO,GAAGL,GAAG,CAAC,CAAC,CAAC,CAAC;IACvB,MAAMM,QAAQ,GAAGN,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMO,OAAO,GAAGP,GAAG,CAAC,CAClB;MAAEQ,IAAI,EAAE,KAAK;MAAEC,OAAO,EAAE;IAAa,CAAC,CACvC,CAAC;IACF,MAAMC,QAAQ,GAAGV,GAAG,CAAC,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;;IAEtD;IACA,MAAMW,UAAU,GAAGV,QAAQ,CAAC,MAC1BW,KAAK,CAACC,OAAO,CAACR,OAAO,CAACS,KAAK,CAACC,MAAM,CAAC,IAAIV,OAAO,CAACS,KAAK,CAACC,MAAM,CAACC,MAAM,GAC9DX,OAAO,CAACS,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,GACvB,EACN,CAAC;IACD,MAAME,KAAK,GAAGjB,GAAG,CAAC,CAAC,CAAC;IAElB,MAAMkB,OAAO,GAAGA,CAAA,KAAM;MACtB;MACAC,OAAO,CAACC,GAAG,CAAC,SAASf,OAAO,CAACS,KAAK,CAACO,IAAI,MAAMJ,KAAK,CAACH,KAAK,EAAE,CAAC;IAC3D,CAAC;IACH;IACAZ,SAAS,CAAC,YAAY;MACpB,IAAI;QACA,MAAMoB,EAAE,GAAGC,MAAM,CAACnB,KAAK,CAACoB,MAAM,CAACF,EAAE,CAAC;QACpC,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,qCAAqCJ,EAAE,EAAE,CAAC;QAClE,MAAMK,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAI,CAAC,CAAC;QAC7B,IAAI,CAACA,IAAI,EAAE,MAAM,IAAIC,KAAK,CAAC,KAAK,CAAC;QACjCvB,OAAO,CAACS,KAAK,GAAGe,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC;MAClC,CAAC,CAAC,OAAOI,CAAC,EAAE;QACVZ,OAAO,CAACa,KAAK,CAAC,QAAQ,EAAED,CAAC,CAAC;MAC5B;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}